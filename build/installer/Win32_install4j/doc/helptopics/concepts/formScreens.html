<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Form Screens</title>
<link href="../../../doc/help.css" type="text/css" rel="stylesheet">
<script type="text/javascript">
      function detectFrameset() {
        framesetpage="../../../doc/indexRedirect.html";
        thispage=window.location.href;
        if (thispage.indexOf('://')<0) {thispage="://"+thispage;};
        prefix=thispage.substring(0,thispage.lastIndexOf('://'));
        suffix=thispage.substring(thispage.lastIndexOf('://')+3,thispage.length);
        if (parent.location.href==window.location.href) {
          parent.location.href=framesetpage+"?"+prefix+"&&&"+suffix
        } else {
          for(i = 0; i < parent.frames.length; i++) {
            if(parent.frames[i].name == "code" && parent.frames[i].MTMLoaded) {
              parent.frames[i].MTMTrack = true;
              setTimeout("parent.frames[" + i + "].MTMDisplayMenu()", 50);
              break;
            }
          }
        }
      }
    
    </script>
</head>
<body onload="detectFrameset()">
<table width="100%" border="0">
<tr>
<td>
<h2>Form Screens</h2>
</td><td valign="top" align="right"><a href="../../../doc/helptopics/concepts/screensAndActions.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/concepts/$folder$.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/concepts/variables.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
<hr>
<br>
<div>
    
<h3>1. Introduction</h3>
    
      Some screens in install4j contain a configurable form. In these screens, you can
      <a href="../../../doc/steps/installerGui/formComponents.html">configure a list of form components</a>
      along the vertical axis of the form. install4j provides you with properties to control the
      initialization of form components and the way the user selection is bound to
      <a href="../../../doc/helptopics/concepts/variables.html">installer variables</a>.
      With this facility you can easily generate good-looking installer screens that display arbitrary data to
      the user and request arbitrary information to be entered.
    <br>
    
<p>
      Standard screens that have a configurable form include the "Additional confirmations" and the "Finish" screen.
      In addition, install4j offers a customizable form screen (similar to the "Additional confirmations" screen)
      and a customizable banner form screen (similar to the "Finish" screen). For screens that have a configurable
      form, a "Form Components" tab is shown in the "Configuration" section of the
      <a href="../../../doc/steps/installerGui/screens.html">screen configuration</a>. The actual configuration of
      the form components is performed in a separate dialog:
    </p>
    
<p>
      
<img style="vertical-align: middle" align="middle" border="0" src="../../../doc/images/form_components.png">
    </p>
    
<p>
      By default, a form is top-aligned and fills the entire available horizontal space. You can change this
      default behavior in the properties of the containing screen. For example, for a set of radio buttons
      that should be centered horizontally and vertically, the "Fill horizontally" and "Fill vertically"
      properties of the screen must be set to "false".
    </p>
    
<h3>2. Form components</h3>
    
<p>
      install4j offers a large number of form components that represent most common components available
      in Java and some other special components that are useful in the context of an installer. All
      components that expect user input have an optional leading label. The components themselves
      are left-aligned on the entire form. If you leave the label text empty, the form component will
      occupy the entire horizontal space of the form.
    </p>
    
<p>
      Every form component has configurable insets. For vertical gaps that are meant to separate groups of
      form components, consider using a "Vertical spacer" form component since it makes the grouping clearer
      and allows to to reorder form components more easily.
    </p>
    
<p>
      You can preview your form at any time with the <b>[Preview Form]</b> button. The preview dialog
      performs all variable replacements of compiler variables and custom localization keys, but not of
      installer variables. No initialization scripts are run. The preview is intended to give you quick feedback
      about visual aspects of your form. It does not show the actual screen where the form mights be smaller and
      other elements might be present. For example, the "Finish" screen is a banner screen where form occupies a
      relatively limited space in the bottom right corner and is intended to show a few check boxes at most.
    </p>
    
<p>
      
<img style="vertical-align: middle" align="middle" border="0" src="../../../doc/images/form_preview.png">
    </p>
    
<p>
      Every form component always has its preferred vertical height.
      For some form components such as the "List" form component, this preferred vertical size is configurable.
      If the vertical extent of the form exceeds the available vertical space, a scrollbar is shown.
    </p>


    
<h3>3. User input</h3>
    
<p>
      If a form component can accept user input, you need some way to access the user selection afterwards.
      install4j saves user input for such form components to the
      <a href="../../../doc/helptopics/concepts/variables.html">installer variable</a> whose name is
      specified in the "Variable name" property. That variable can then be used later on, for example
      in condition expressions for screens and actions. If you have a check box that saves its user input to
      a variable called "userSelection", the condition expression
      <pre>
  context.getBooleanVariable("userSelection")
      </pre>
      will skip the screen or action for which that condition expression is used. The user selection in
      form components is written to the variables before the validation expression for the screen is called.
      If you have a text field that saves its input to the variable "fileName", the validation expression
      <pre>
  Util.showOptionDialog("Do you really want to delete " + context.getVariable("fileName"),
        new String[] {"Yes", "No"}, JOptionPane.QUESTION_MESSAGE) == 0
      </pre>
      used on the same screen will block the advance to the next screen if the user answers with "No".
    </p>
    
<p>
      The values of installer variables accomodate the general type <tt>java.lang.Object</tt>. Every form component
      saves its user input in its "natural" data type, for example:
    </p>
      
<ul>
<li>
          For check boxes, the type <tt>java.lang.Boolean</tt> is used. For this special case the context offers
          the convenience method <tt>getBooleanVariable</tt>.
        </li>
<li>
          For text fields, the type <tt>java.lang.String</tt> is used.
        </li>
<li>
          For drop down lists the type <tt>java.lang.Integer</tt> is used (the selected index).
        </li>
<li>
          For date spinners, the type <tt>java.lang.Date</tt> is used.
        </li>
</ul>
    
<p>
      The description of the value type for each form component that accepts user input is shown in the
      <a href="../../../doc/steps/installerGui/dialogs/registry.html">registry dialog</a> when you select
      the form component.
    </p>

    
<h3>4. Initialization</h3>
    
<p>
      For each form component, install4j offers several properties that allow you to customize its
      initial state. However, there may be other advanced properties or a more complex logic is required for
      modifying the form component. For this purpose, the "Initialization script"
      property is provided. Form components can expose a well-known component in the initialization script
      that allows you to perform these modifications. This so-called "configuration object" is usually
      contained in the form component itself. For example a "Check box" form component exposes a configurationObject
      parameter of type <tt>javax.swing.JCheckBox</tt> and a "Text field" form component exposes a
      <tt>javax.swing.JTextField</tt>.
    </p>
    
<p>
      As with <a href="../../../doc/helptopics/concepts/screensAndActions.html">actions and screens</a> in general,
      the possibility that the user moves back and forth in the screen sequence presents a dilemma to
      install4j. Any form components that accepts user input has a configurable initial value and
      any form component can have an initialization script. This initialization is performed when the user
      enters the screen for the first time. Should this initialization be performed again when the user moves back
      and then enters the screen once again? Since install4j does not know, it initializes every form component
      only once by default. This policy can be changed with the "Reset initialization on previous" property
      for each form component.
    </p>
  
</div>
<br>
<hr>
<table width="100%" border="0">
<tr>
<td></td><td valign="top" align="right"><a href="../../../doc/helptopics/concepts/screensAndActions.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/concepts/$folder$.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/concepts/variables.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
</body>
</html>
