<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Extensions</title>
<link href="../../../doc/help.css" type="text/css" rel="stylesheet">
<script type="text/javascript">
      function detectFrameset() {
        framesetpage="../../../doc/indexRedirect.html";
        thispage=window.location.href;
        if (thispage.indexOf('://')<0) {thispage="://"+thispage;};
        prefix=thispage.substring(0,thispage.lastIndexOf('://'));
        suffix=thispage.substring(thispage.lastIndexOf('://')+3,thispage.length);
        if (parent.location.href==window.location.href) {
          parent.location.href=framesetpage+"?"+prefix+"&&&"+suffix
        } else {
          for(i = 0; i < parent.frames.length; i++) {
            if(parent.frames[i].name == "code" && parent.frames[i].MTMLoaded) {
              parent.frames[i].MTMTrack = true;
              setTimeout("parent.frames[" + i + "].MTMDisplayMenu()", 50);
              break;
            }
          }
        }
      }
    
    </script>
</head>
<body onload="detectFrameset()">
<table width="100%" border="0">
<tr>
<td>
<h2>Extensions</h2>
</td><td valign="top" align="right"><a href="../../../doc/helptopics/extending/api.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/extending/$folder$.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_up.gif"></a>&nbsp;
            </td>
</tr>
</table>
<hr>
<br>
<div>
    
<h3>1. Introduction</h3>
    
      All standard
      <a href="../../../doc/steps/installerGui/actions.html">actions</a>,
      <a href="../../../doc/steps/installerGui/screens.html">screens</a> and
      <a href="../../../doc/steps/installerGui/formComponents.html">form components</a>
      in install4j use the <a href="../../../doc/helptopics/extending/api.html">installer API</a> themselves. With this API
      you can create new elements that are displayed in the
      <a href="../../../doc/steps/installerGui/dialogs/registry.html">standard registries</a> by
      packaging a JAR file with a few special manifest entries and putting that JAR file
      into the <i><tt>extensions</tt></i> directory of your install4j installation.
    <br>
    
<h3>2. Configurability</h3>
    
<p>
      An extension to install4j will likely need to be configurable by the user. install4j
      uses the <a target="_blank" href="http://java.sun.com/products/javabeans/">JavaBean specification</a> to control
      the user presentation of properties in the install4j IDE. Screens, actions, and form components correspond to
      beans in this context.
    </p>
    
<p>
      Optionally, you can add BeanInfo classes. In essence, a BeanInfo class next to the bean itself describes which properties are editable and
      optionally gives details on how they should be presented.
      Please see the documentation of the
      <a href="../../../doc/api/javadoc/com/install4j/api/beaninfo/package-summary.html">com.install4j.api.beaninfo package</a>
      for the complete documentation on how to develop BeanInfo classes.
      Also, the <i><tt>$INSTALL4J_HOME/samples/customCode/src</tt></i> directory contains a sample action with the associated
      BeanInfo class.
    </p>

    
<h3>3. JAR manifest</h3>
    
<p>
      In order to tell install4j which classes are screens, actions or form components, you have to use the
      following manifest keys:
    </p>
    
<ul>
<li>
<font color="#5A4E87"><b>Install-Action</b></font>
<br>
        for actions implementing <tt>com.install4j.api.actions.InstallAction</tt>
      
</li>
<li>
<font color="#5A4E87"><b>Uninstall-Action</b></font>
<br>
        for actions implementing <tt>com.install4j.api.actions.UninstallAction</tt>
      
</li>
<li>
<font color="#5A4E87"><b>Installer-Screen</b></font>
<br>
        for screens implementing <tt>com.install4j.api.screens.InstallerScreen</tt>
      
</li>
<li>
<font color="#5A4E87"><b>Uninstaller-Screen</b></font>
<br>
        for screens implementing <tt>com.install4j.api.screens.UninstallerScreen</tt>
      
</li>
<li>
<font color="#5A4E87"><b>Form-Component</b></font>
<br>
        for screens implementing <tt>com.install4j.api.formcomponents.FormComponent</tt>
      
</li>
</ul>
    
<p>
      Please note that usually you do not implement these interfaces yourself, but rather extend one of
      the abstract base classes.
    </p>
    
<p>
      A typical manifest with one action and one screen looks like this:
    </p>
    
<pre>
      Depends-On: driver.jar common.jar

      Name: com/mycorp/actions/MyAction.class
      Install-Action: true

      Name: com/mycorp/screens/MyScreen.class
      Installer-Screen: true
      Uninstaller-Screen: true
    </pre>
    
<p>
      
<b>Note:</b> If you only have named sections and no global section in your manifest file, the first line must be an empty line
      since it separates the global keys from the named sections.
    </p>
    
<p>
      The <tt>Depends-On</tt> manifest key can specify a number of relative JAR files separated by spaces that
      must be included when the extension is deployed. That key can also occur separately for each named section.
    </p>
    
<p>
      As you see in the example for the screen, each class can have multiple keys if the appropriate interfaces
      are implemented.
    </p>

    
<h3>4. Extension deployment</h3>
    
<p>
      On startup, install4j will scan the manifests of all JAR files that it finds in the
      <i><tt>$INSTALL4J_HOME/extensions</tt></i> directory. Any screens, actions or form components that are
      found in the manifests are added to the <a href="../../../doc/steps/installerGui/dialogs/registry.html">standard registries</a>.
      If a bean cannot be instantiated, the exception is printed to stderr which is captured in
      <i><tt>$INSTALL4J_HOME/bin/error.log</tt></i> and no further error is displayed.
    </p>
    
<p>
      If any of those screens, actions or form components are selected by the user, the required
      JAR files are deployed with the generated installers. This means that installing extensions
      does not create an overhead for installers that do not use them.
    </p>
  
</div>
<br>
<hr>
<table width="100%" border="0">
<tr>
<td></td><td valign="top" align="right"><a href="../../../doc/helptopics/extending/api.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../doc/helptopics/extending/$folder$.html"><img vspace="0" align="center" border="0" src="../../../doc/images/help_up.gif"></a>&nbsp;
            </td>
</tr>
</table>
</body>
</html>
