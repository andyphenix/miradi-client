<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Java Code Editor</title>
<link href="../../../../doc/help.css" type="text/css" rel="stylesheet">
<script type="text/javascript">
      function detectFrameset() {
        framesetpage="../../../../doc/indexRedirect.html";
        thispage=window.location.href;
        if (thispage.indexOf('://')<0) {thispage="://"+thispage;};
        prefix=thispage.substring(0,thispage.lastIndexOf('://'));
        suffix=thispage.substring(thispage.lastIndexOf('://')+3,thispage.length);
        if (parent.location.href==window.location.href) {
          parent.location.href=framesetpage+"?"+prefix+"&&&"+suffix
        } else {
          for(i = 0; i < parent.frames.length; i++) {
            if(parent.frames[i].name == "code" && parent.frames[i].MTMLoaded) {
              parent.frames[i].MTMTrack = true;
              setTimeout("parent.frames[" + i + "].MTMDisplayMenu()", 50);
              break;
            }
          }
        }
      }
    
    </script>
</head>
<body onload="detectFrameset()">
<table width="100%" border="0">
<tr>
<td>
<h2>Java Code Editor</h2>
</td><td valign="top" align="right"><a href="../../../../doc/steps/installerGui/dialogs/strings.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../../doc/steps/installerGui/dialogs/$folder$.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
<hr>
<br>
<div>
    The Java code editor is shown from the
    <a href="../../../../doc/steps/installerGui/screensAndActions.html">screens &amp; actions</a> tab or the
    <a href="../../../../doc/steps/installerGui/formComponents.html">form component</a>
    editor when you click on the <b>[...]</b> for a
    Java code property.
    <table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      Please see the help on the <a href="../../../../doc/steps/installerGui/dialogs/strings.html">string editor dialog</a>
      for common editing functionality.
    </td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      The box above the edit area show the available parameters for the Java code property as well
      as the return type. If parameters or return type are classes (and not primitive types), they
      will be shown as hyperlinks. Clicking on such a hyperlink opens the Javadoc in the external browser.
      If you would not like the default browser to be opened, you can configure your own browser
      in the <a href="../../../../doc/preferences.html">preferences dialog</a>.
      <p>
        To get more information on classes from the <tt>com.install4j.*</tt> packages,
        please choose <i>Help-&gt;Show Javadoc Overview</i> from the menu and read the the
        <a href="../../../../doc/helptopics/extending/api.html">help topic for the install4j API</a>.
        In addition, the Java code editor offers a <a href="../../../../doc/steps/installerGui/dialogs/codeGallery.html">code gallery</a>
        that contains useful snippets that show you how to get started with using the install4j API.
        The code gallery is invoked from the tool bar or by choosing <i>Code-&gt;Insert from Code gallery</i>
        from the menu.
      </p>
      
<p>
        A number of packages can be used with using fully-qualified class names. Those packages are:
        <ul>
<li>java.util.*</li>
<li>java.io.*</li>
<li>javax.swing.*</li>
<li>com.install4j.api.*</li>
<li>com.install4j.api.beans.*</li>
<li>com.install4j.api.context.*</li>
<li>com.install4j.api.events.*</li>
<li>com.install4j.api.screens.*</li>
<li>com.install4j.api.actions.*</li>
<li>com.install4j.api.formcomponents.*</li>
<li>com.install4j.api.update.*</li>
<li>com.install4j.api.windows.*</li>
<li>com.install4j.api.unix.*</li>
</ul>
      
</p>
      
<p>
        You can put a number of import statements as the first lines in the text area in order to avoid using fully
        qualified class names.
      </p>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      Java code properties can be
      <ul>
<li>
<font color="#5A4E87"><b>expressions</b></font>
<br>
          An expression doesn't have a trailing semicolon and evaluates to the required return type.
          <p>
            Example: <code>!context.isUnattended() &amp;&amp; !context.isConsole()</code>
          
</p>
          
<p>
            The above example would work as the condition expression of an action and skip the action for
            unattended or console installations.
          </p>
        
</li>
<li>
<font color="#5A4E87"><b>scripts</b></font>
<br>
          A script consists of a series of Java statements with a return statement of the
          required return type as the last statement.
          <p>
            Example: <code>if (!context.getBooleanVariable("enterDetails")) context.goForward(2, true, true); return true;</code>
          
</p>
          
<p>
            The above example would work as the validation expression of a screen and skip two screens forward
            (checking the conditions of the target screen as well as executing the actions of the current screen)
            if the variable with name "enterDetails" is not set to "true".
          </p>
        
</li>
</ul>
      
<p>
        install4j detects automatically whether you have entered an expression or a script.
      </p>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      
        The primary interface to interact with the installer or uninstaller is the <b>context</b> which is always among
        the available parameters. The context provides information about the current installation and gives access to
        variables, screens, actions and other elements of the installation or uninstallation. The parameter is of
        type
      
      <ul>
<li>
          
<tt>com.install4j.api.context.InstallerContext</tt> for screens and actions in the installation mode
        </li>
<li>
          
<tt>com.install4j.api.context.UninstallerContext</tt> for screens and actions in the uninstallation mode
        </li>
<li>
          
<tt>com.install4j.api.context.Context</tt> for form components.
        </li>
</ul>
      
<p>
        Apart from the context, the action, screen or form component to which the Java code property belongs is
        among the available parameters. If you know the actual class, you can cast to it and modify the object
        as needed.
      </p>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      The Java editor offers the following code assistance powered by the eclipse platform:
      <ul>
<li>
<font color="#5A4E87"><b>Code completion</b></font>
<br>
          Pressing <code>CTRL-Space</code> brings up a popup with code completion proposals. Also, typing
          a dot (".") shows this popup after a delay if no other character is typed.
          While the popup is displayed, you can continue to type or delete characters with <code>Backspace</code> and
          the popup will be updated accordingly. "Camel-hump completion" is supported, i.e. typing <tt>NPE</tt> and
          hitting <code>CTRL-Space</code> will propose <tt>NullPointerException</tt> among other classes.
          If you accept a class that is not automatically imported, the fully qualified name will be inserted.
          <p>
            The completion popup can suggest:
          </p>
          
<ul>
<li>
<img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/completion_variable_16.png"> variables and default parameters. Default parameters are displayed in bold font.</li>
<li>
<img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/completion_package_16.png"> packages (when typing an import statement)</li>
<li>
<img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/completion_class_16.png"> classes</li>
<li>
<img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/completion_field_16.png"> fields (when the context is a class)</li>
<li>
<img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/completion_method_16.png"> methods (when the context is a class or the
              parameter list of a method)
            </li>
</ul>
          
<p>
            You can configure code completion behavior in the <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html">Java editor settings</a>.
          </p>
        
</li>
<li>
<font color="#5A4E87"><b>Problem analysis</b></font>
<br>
          The code that you enter is analyzed on the fly and checked for errors and warning conditions. Errors are
          shown as red underlines in the editor and red stripes in the right gutter. Warnings (such as an unused variable declaration)
          are shown as a yellow backgrounds in the editor and yellow stripes in the right gutter. Hovering the mouse over an error or
          warning in the editor as well as hovering the mouse over a stripe in the gutter area displays the error
          or warning message.
          <p>
            The status indicator at the top of the right gutter is
            <ul>
<li>
<font color="#5A4E87"><b>green</b></font>
<br>
                if there are no warnings or errors in the code.
              </li>
<li>
<font color="#5A4E87"><b>yellow</b></font>
<br>
                if there are warnings but no errors in the code.
              </li>
<li>
<font color="#5A4E87"><b>red</b></font>
<br>
                if there are errors in the code. In this case the code will not compile and the installer cannot be generated.
              </li>
</ul>
          
</p>
          
<p>
            You can configure the threshold for problem analysis in the <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html">Java editor settings</a>.
          </p>
        
</li>
<li>
<font color="#5A4E87"><b>Context-sensitive Javadoc</b></font>
<br>
          Pressing <code>SHIFT-F1</code> opens the browser at the Javadoc page that describes the element at the cursor
          position. If no corresponding Javadoc can be found, a warning message is displayed. Javadoc for the
          Java runtime library can only be displayed if a design time JDK is configured
          and a valid Javadoc location is specified in the <a href="../../../../doc/steps/general/dialogs/configureJdks.html">design time JDK configuration</a>.
          <p>
            You can set the design time JDK in the <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html">Java editor settings</a>
          
</p>
        
</li>
</ul>
      
<p>
        All key bindings in the Java code editor are configurable. Choose <i>Settings-&gt;Key Map</i>
        to display the <a href="../../../../doc/steps/installerGui/dialogs/keyMap.html">Key map editor</a>.
      </p>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      Screens, actions and form components are wired together with <b>installer variables</b>, please see the
      <a href="../../../../doc/helptopics/concepts/screensAndActions.html">help topic on screens and actions</a> for more
      information. Setting and getting installer variables is done through the context parameter with the
      <tt>context.getVariable(String variableName)</tt> and
      <tt>context.setVariable(String variableName, Object value)</tt> methods. The convenience method
      <tt>context.getBooleanVariable(String variableName)</tt> makes it easier to check conditions.
      Any object can be used as the value for a variable. To use installer variables in text properties
      of actions, screens and form components, write them as <code>${installer:myVariableName}</code>.
    </td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      If the gutter icon in the top right corner of the dialog is green, your script is going to compile unless you
      have disabled error analysis in the <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html">Java editor settings</a>.
      In some situations, you might want to try the actual compilation. Choosing
      <i>Code-&gt;Test Compile</i> from the menu will compile the
      script and display any errors in a separate dialog. Saving your script with the <b>[OK]</b>
      button will not test the syntactic correctness of the script. When your install4j project is compiled, the script
      will also be compiled and errors will be reported.
    </td>
</tr>
</table>

  
</div>
<br>
<hr>
<table width="100%" border="0">
<tr>
<td></td><td valign="top" align="right"><a href="../../../../doc/steps/installerGui/dialogs/strings.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_previous.gif"></a>&nbsp;
            <a href="../../../../doc/steps/installerGui/dialogs/$folder$.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../../doc/steps/installerGui/dialogs/javaEditorSettings.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
</body>
</html>
