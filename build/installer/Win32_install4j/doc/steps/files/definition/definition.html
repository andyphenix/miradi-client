<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Files - Defining the Distribution Tree</title>
<link href="../../../../doc/help.css" type="text/css" rel="stylesheet">
<script type="text/javascript">
      function detectFrameset() {
        framesetpage="../../../../doc/indexRedirect.html";
        thispage=window.location.href;
        if (thispage.indexOf('://')<0) {thispage="://"+thispage;};
        prefix=thispage.substring(0,thispage.lastIndexOf('://'));
        suffix=thispage.substring(thispage.lastIndexOf('://')+3,thispage.length);
        if (parent.location.href==window.location.href) {
          parent.location.href=framesetpage+"?"+prefix+"&&&"+suffix
        } else {
          for(i = 0; i < parent.frames.length; i++) {
            if(parent.frames[i].name == "code" && parent.frames[i].MTMLoaded) {
              parent.frames[i].MTMTrack = true;
              setTimeout("parent.frames[" + i + "].MTMDisplayMenu()", 50);
              break;
            }
          }
        }
      }
    
    </script>
</head>
<body onload="detectFrameset()">
<table width="100%" border="0">
<tr>
<td>
<h2>Files - Defining the Distribution Tree</h2>
</td><td valign="top" align="right"><a href="../../../../doc/steps/files/definition/$folder$.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../../doc/steps/files/definition/wizard.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
<hr>
<br>
<div>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      
        The distribution tree shows your file selections and the distribution directory
        structure created by you. The distribution tree is <b>drag-and drop enabled</b>.
      
      <p>
        To check whether your definition actually produces the desired results, please go to
        the <a href="../../../../doc/steps/files/results.html">View Results tab</a> of the
        <a href="../../../../doc/steps/files/files.html">Files steps</a>.
      </p>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      
        The top-level nodes in the distribution tree are called <b>file sets</b>. There is
        one "Default file set" that cannot be deleted or renamed. The relative paths of all files that are added to
        a file set must be unique. Please see the
        <a href="../../../../doc/helptopics/concepts/files.html">help topic on file sets and installation components</a>
        for more information on how to use file sets.
      
      <p>
        Within a single file set, it causes an error if the installation paths for two files collide. For example, if
        you have added the contents of two different directories into the same folder in the distribution
        tree and both directories contain a file <i><tt>file.txt</tt></i>, building the project will fail
        with a corresponding error message. In this case, you have to exclude the file in one of the
        directory entries. This is only valid for files, sub-directory hierarchies on the other hand
        are merged and can overlap between multiple directory entries and explicitly added folders.
      </p>
      
<p>
        You can create new file sets with the
        <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/fileset_extra_16.png">&nbsp;<b>[New File Set]</b>
        action in the <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/add.png">&nbsp;add menu on the right side.
        Each file set has its own "Installation directory" root. If you define custom roots that should be present
        in multiple file sets, you have to duplicate them.
      </p>
      
    
      When using the <a href="../../../../doc/api/javadoc/overview-summary.html">install4j API</a>, you reference file sets
      with IDs. You can show IDs in the distribution tree by activating the
      <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/id_16.png">&nbsp;<b>[Show IDs]</b> button on the lower right side of
      the distribution tree. The automatically generated numerical IDs are then shown in brackets.
      The selection will be remembered across restarts of install4j.
    <br>
  
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      The child nodes of a file set are called <b>installation roots</b>.
      Their location is resolved when the installer runs. There are two types of roots:
      <ul>
<li>
          
<p>
            The <b>default root of the distribution tree</b> is labeled as "Installation directory" and
            has a <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/root_installdir_16.png"> special icon. This
            is the directory where your application will be installed on the target system. The directory
            is dependent on user actions at the time of installation. In regular installers
            a user can select an arbitrary directory where the application should be installed. For RPM
            media files, a user can override the default directory with command line parameters. For
            archives, the files are simply extracted into a commmon top-level directory.
          </p>
          
<p>
            The installation directory will only be created if you execute an <b>"Install files" action</b>
            in the <a href="../../../../doc/steps/installerGui/screensAndActions.html">installer configuration</a>. By default, the
            "Install files" action is placed on the "Installation" screen. If your installer should not create
            an installation directory, you can ignore this root and remove the "Install files" action.
          </p>
          
<p>
            To learn more on the various installer modes, please see the corresponding
            <a href="../../../../doc/helptopics/installers/installerModes.html">help topic</a>.
          </p>
        
</li>
<li>
          If your application needs to install files into directories outside the main installation directory,
          you can add <b>custom roots</b> to the distribution tree. This is done with the
          <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/root_extra_16.png">&nbsp;<b>[New Root]</b> action
          in the <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/add.png">&nbsp;add menu on the right side or in the context menu.
          The actual location of this root is defined by its name and has to resolve to a valid directory at runtime.
          There are several possibilities for using custom roots. The name of a custom root can be
          <ul>
<li>
<font color="#5A4E87"><b>a fixed absolute path known at compile-time</b></font>
<br>
              This works for custom environments where there's a fixed policy for certain locations. For example,
              if you have to install some files to <i><tt>D:\apps\myapp</tt></i>, you can enter that path as the name
              for your custom root.
              <p>
                If you build installers for different platforms, that root is likely to be different for each platform.
                In that case, you can use a <a href="../../../../doc/steps/general/variables.html">compiler variable</a>
                for the name of the custom root and
                <a href="../../../../doc/steps/media/steps/customize.html">override its value for each media file</a>.
              </p>
            
</li>
<li>
<font color="#5A4E87"><b>an installer variable that you resolve at runtime</b></font>
<br>
              If you would like to install files into the directory of an already installed application, such as a
              plugin for your own application, you can use an installer variable that you resolve at runtime.
              Installer variables have an <tt>installer:</tt> prefix, such as <tt>${installer:rootDir}</tt>,
              and can be set in a <a href="../../../../doc/helptopics/concepts/variables.html">variety of ways</a>.
              <p>
                The most common case would be to add a
                "Directory selection" screen to the <a href="../../../../doc/steps/installerGui/screensAndActions.html">screen sequence</a>
                and set its variable name property to the variable that you've used as the name of the custom root.
                For the above example, that would be "rootDir" (without the ${installer:...} variable syntax).
              </p>
              
<p>
                Alternatively, you could use a "Set a variable" action to determine the location programmatically.
              </p>
            
</li>
<li>
<font color="#5A4E87"><b>a pre-defined installer variable</b></font>
<br>
              install4j offers several variables for "magic folders" that point to common directories, such as
              <tt>${installer:sys.userHome}</tt> which resolves to the user home directory or
              <tt>${installer:sys.system32Dir}</tt> which resolves to the <i><tt>system32</tt></i> directory on
              Windows.
            </li>
</ul>
          
<p>
            If a custom installation root is not bound at runtime or if it points to an invalid directory,
            the contained files will not be installed. There will be no error messages, if you require error
            handling, you can use a "Run a script" action before the "Install files" action with the
            appropriate error message and failure strategy.
          </p>
          
<p>
            
<b>Note:</b> For <a href="../../../../doc/steps/media/mediaFileTypes.html">archive media file types</a>, custom
            installation roots are not installed. If you require these custom roots for your installation, you
            cannot use archives.
          </p>
          
<p>
            An alternative way to redirect installed files to different directories is to use the
            "Directory resolver" property of the "Install files" actions. Also, the "File filter" property
            of that action can be used to conditionally install files. The use of these properties is only
            recommended if you require their full flexibility. Otherwise, using custom installation roots and
            <a href="../../../../doc/steps/files/components.html">installation components</a> is a better approach.
          </p>
        
</li>
</ul>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      
        Beneath an installation root, you can add files or create folders:
        <ul>
<li>
            To create a folder, use the
            <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/new_folder_small.png">&nbsp;<b>[New folder]</b>
            action in the <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/add.png">&nbsp;add menu on the right side
            or in the context menu.
            A folder named "New Folder" will be created below the selected directory. If no directory or
            installation root is selected, it will be created below the "Installation directory" root node.
            Right after its creation, the default name is editable and you can enter the intended name of the folder.
            Confirm your entry with <code>Enter</code>. To configure further properties of the folder, you can
            edit the folder node (see below) to show the
            <a href="../../../../doc/steps/files/dialogs/folderProperties.html">folder property dialog</a>.
          </li>
<li>
            To add files, use the
            <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/file.png">&nbsp;<b>[Add files and directories]</b>
            action in the <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/add.png">&nbsp;add menu on the right side
            or in the context menu.
            The <a href="../../../../doc/steps/files/definition/wizard.html">file wizard</a> will be displayed.
          </li>
</ul>
      
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      In the distribution tree you can
      <ul>
<li>
<font color="#5A4E87"><b>Move entries</b></font>
<br>
          Entries are moved by dragging them with the mouse to the desired location. Both directories,
          file entries and directory content entries can be moved. To select a target directory inside a closed
          directory while dragging, hover with the mouse over the closed directory and it will open after
          a short delay. While dragging, the insertion bar shows you where the entry would be dropped.
        </li>
<li>
<font color="#5A4E87"><b>Delete entries</b></font>
<br>
          Entries can be deleted by hitting the <code>DEL</code> key or using the corresponding
          tool bar button or menu entry.
        </li>
<li>
<font color="#5A4E87"><b>Rename entries</b></font>
<br>
          
<p>
            Some types of entries can be renamed by using the
            <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/name_edit_16.png">&nbsp;<b>[Rename]</b> action on the right
            side of the tree or from the context menu. The name of the entry can then be edited in-place.
          </p>
          
<p>
            Renaming entries is possible for:
          </p>
          
<ul>
<li>File sets</li>
<li>Roots</li>
<li>Folders</li>
</ul>
        
</li>
<li>
<font color="#5A4E87"><b>Edit the contents of entries</b></font>
<br>
          The contents of some types of entries can be edited by using the
          <img style="vertical-align: middle" align="middle" border="0" src="../../../../doc/images/item_edit_small.png">&nbsp;<b>[Edit]</b> action
          on the right side of the tree
          or hitting the <code>ENTER</code> key while the entry is selected.
          <p>
            Editing entries is possible for:
          </p>
          
<ul>
<li>
<font color="#5A4E87"><b>Folders</b></font>
<br>
              Editing a folder means opens the
              <a href="../../../../doc/steps/files/dialogs/folderProperties.html">folder property dialog</a>.
            </li>
<li>
<font color="#5A4E87"><b>Single file entries</b></font>
<br>
              Editing a single file entry will bring up the
              <a href="../../../../doc/steps/files/definition/wizard.html">file wizard</a>. Only
              the selected file will be shown in the "Select files" step, even if you initially
              selected multiple files with the wizard. If you add additional files in this step,
              they will be added below the selected file in the distribution tree. If you delete
              the selected file in this step, it will also be deleted in the distribution tree.
            </li>
<li>
<font color="#5A4E87"><b>Directory content entries</b></font>
<br>
              Editing a directory content entry will bring up the
              <a href="../../../../doc/steps/files/definition/wizard.html">file wizard</a>.
            </li>
</ul>
        
</li>
</ul>
    
</td>
</tr>
</table>
    
<table style="margin-top: 1ex" cellpadding="3" cellspacing="0" border="0">
<tr>
<td valign="top"><img style="vertical-align: middle" border="0" src="../../../../doc/images/section_bullet.gif">&nbsp;</td><td>
      Using <a href="../../../../doc/helptopics/concepts/variables.html">compiler variables</a> in the distribution tree
      allows you to make <b>compile-time conditional includes</b>:
      <ul>
<li>
           if a directory node resolves to the empty string after variable replacement,
           the directory and any contained entries will not be included in the distribution.
         </li>
<li>
          if the source directory of a "contents of directory" node resolves to the empty string
          after variable replacement, no files will be included through that entry.
        </li>
<li>
          if the file name of a single file node resolves to the empty string
          after variable replacement, no file will be included.
        </li>
</ul>
      
<p>
        For conditions that are evaluated at runtime or for adding platform dependent files, you should use
        <a href="../../../../doc/helptopics/concepts/files.html">files sets</a> instead.
      </p>
    
</td>
</tr>
</table>
  
</div>
<br>
<hr>
<table width="100%" border="0">
<tr>
<td></td><td valign="top" align="right"><a href="../../../../doc/steps/files/definition/$folder$.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_up.gif"></a>&nbsp;
            <a href="../../../../doc/steps/files/definition/wizard.html"><img vspace="0" align="center" border="0" src="../../../../doc/images/help_next.gif"></a>&nbsp;
            </td>
</tr>
</table>
</body>
</html>
